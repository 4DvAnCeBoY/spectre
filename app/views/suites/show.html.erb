<%
@page_title = "#{@suite.name} â€” #{@suite.project.name}"
%>

<ul class="breadcrumb">
  <li><%= link_to 'Projects', projects_url %></li>
  <li><%= link_to @suite.project.name, projects_url %></li>
  <li><%= @suite.name %></li>
</ul>

<h1><%= @suite.name %> <span class="text-muted">(<%= @suite.project.name %>)</span></h1>

<h2>Latest runs</h2>
<table class="table table-striped">
  <thead class="thead-inverse">
    <tr>
      <th>#</th>
      <th>Date</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <% @suite.runs.reversed.limit(5).each do |run| %>
      <tr>
        <th><%= link_to "##{run.sequential_id}", project_suite_run_path(run.suite.project, run.suite, run) %></th>
        <td class="text-muted"><%= run.created_at.to_formatted_s(:long_ordinal) %></td>
        <td>
          <% if run.tests.count == 0 %>
            <span class="label label-info">No tests</span>
          <% end %>
          <% if run.passing_tests > 0 %>
            <span class="label label-success"><%= run.passing_tests %> passed</span>
          <% end %>
          <% if run.failing_tests > 0 %>
            <span class="label label-danger"><%= run.failing_tests %> failed</span>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<h2>Baselines</h2>
<%= render 'shared/test_filters', test_filters: @baselines %>
<table class="table table-striped">
  <thead class="thead-inverse">
    <tr>
      <th>Test</th>
      <th>Browser</th>
      <th>Platform</th>
      <th>Size</th>
      <th>Screenshot</th>
    </tr>
  </thead>
  <tbody>
    <% @baselines.tests.each do |test| %>
      <tr>
        <th><%= test.name %></th>
        <td><%= test.browser %></td>
        <td><%= test.platform %></td>
        <td><%= test.size %><%= test.screenshot.height %></td>
        <td><%= link_to(image_tag(test.screenshot_thumbnail.url, width: test.screenshot_thumbnail.width, height: test.screenshot_thumbnail.height), test.screenshot.url) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

